<!DOCTYPE HTML>
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <!--THIS FILE IS GENERATED FROM AN XML TEMPLATE. DO NOT EDIT!-->
      <title>Music Encoding Initiative Guidelines</title>
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="author" content="Perry Roland">
      <meta name="subject" content="Documentation for the Music Encoding Initiative (MEI) Data Model">
      <meta name="keywords" content="Music Encoding, MEI, Digital Humanities, Musicology, Music Librarianship, Music Information Retrieval">
      <meta name="date" content="2025-08-21">
      <meta name="generator" content="MEI XSLT stylesheets">
      <meta name="DC.Title" content="Music Encoding Initiative Guidelines">
      <meta name="DC.description" content="A customization for encoding neume notation.">
      <meta name="DC.Type" content="Text">
      <meta name="DC.Format" content="text/html">
      <link rel="stylesheet" media="screen" type="text/css" href="../assets/css/screen/search.css">
      <link rel="stylesheet" media="screen" type="text/css" href="../assets/css/screen/mei-website.css">
      <link rel="stylesheet" media="screen" type="text/css" href="../assets/css/screen/mei-screen.css"><script src="../assets/js/searchIndex.js"></script><script src="../assets/js/fuse.min.js"></script></head>
   <body class="simple" id="TOP">
      <div class="headerBar"></div>
      <div class="container content">
         <div class="columns specsLayout">
            <div class="top-navigation column col-md-12 show-md">
               <div class="top-navigation-header columns">
                  <div class="buttonbox"><button class="btn btn-action btn-sm btn-primary" id="topNavigationShow"><i class="icon icon-menu"></i></button></div>
                  <div class="searchbox">
                     <form>
                        <div class="search_group"><input id="search_inputTop" class="search_input" title="At least 3 characters" type="text"><button type="submit" id="submitSearchButtonTop" class="search_button"><span class="search_icon">⚲</span></button></div>
                     </form>
                  </div>
               </div>
            </div>
            <div class="column col-8 col-md-12">
               <div id="search-content"></div>
               <section class="specPage moduleSpec">
                  <h2 id="MEI.gestural">MEI.gestural</h2>
                  <div class="specs">
                     <div class="desc"></div>
                     <div class="contentListBox">
                        <h3>Elements in MEI.gestural</h3>
                        <div class="contents"><span class="placeholder">– no elements defined in MEI.gestural –&nbsp;</span></div>
                     </div>
                     <div class="contentListBox">
                        <h3>Model Classes in MEI.gestural</h3>
                        <div class="contents"><span class="placeholder">– no model classes defined in MEI.gestural –&nbsp;</span></div>
                     </div>
                     <div class="contentListBox">
                        <h3>Macro Groups in MEI.gestural</h3>
                        <div class="contents"><span class="placeholder">– no macro groups defined in MEI.gestural –&nbsp;</span></div>
                     </div>
                     <div class="contentListBox">
                        <h3>Attribute Classes in MEI.gestural</h3>
                        <div class="contents"><a class="link_odd link_odd_attClass" href="../attribute-classes/att.accid.ges.html" title="Gestural domain attributes.">att.accid.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.accidental.ges.html" title="Attributes for capturing momentary pitch inflection in the gestural domain.">att.accidental.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.ambNote.ges.html" title="Gestural domain attributes.">att.ambNote.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.ambitus.ges.html" title="Gestural domain attributes.">att.ambitus.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.anchoredText.ges.html" title="Gestural domain attributes.">att.anchoredText.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.annot.ges.html" title="Gestural domain attributes.">att.annot.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.artic.ges.html" title="Gestural domain attributes.">att.artic.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.articulation.ges.html" title="Attributes describing the method of performance.">att.articulation.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.attacking.html" title="Attributes whether an element is performed &#34;attacca&#34;.">att.attacking</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.barLine.ges.html" title="Gestural domain attributes.">att.barLine.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.caesura.ges.html" title="Gestural domain attributes.">att.caesura.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.chord.ges.html" title="Gestural domain attributes.">att.chord.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.chordDef.ges.html" title="Gestural domain attributes.">att.chordDef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.chordMember.ges.html" title="Gestural domain attributes.">att.chordMember.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.clef.ges.html" title="Gestural domain attributes.">att.clef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.clefGrp.ges.html" title="Gestural domain attributes.">att.clefGrp.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.cpMark.ges.html" title="Gestural domain attributes.">att.cpMark.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.curve.ges.html" title="Gestural domain attributes.">att.curve.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.custos.ges.html" title="Gestural domain attributes.">att.custos.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.dir.ges.html" title="Gestural domain attributes.">att.dir.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.dot.ges.html" title="Gestural domain attributes.">att.dot.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.duration.ges.html" title="Attributes that record performed duration that differs from a feature’s written duration.">att.duration.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.dynam.ges.html" title="Gestural domain attributes.">att.dynam.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.ending.ges.html" title="Gestural domain attributes.">att.ending.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.episema.ges.html" title="Gestural domain attributes.">att.episema.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.f.ges.html" title="Gestural domain attributes.">att.f.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.grpSym.ges.html" title="Gestural domain attributes.">att.grpSym.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.harm.ges.html" title="Gestural domain attributes.">att.harm.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.hispanTick.ges.html" title="Gestural domain attributes.">att.hispanTick.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.instrDef.ges.html" title="Gestural domain attributes.">att.instrDef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.keyAccid.ges.html" title="Gestural domain attributes.">att.keyAccid.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.keySig.ges.html" title="Gestural domain attributes.">att.keySig.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.layer.ges.html" title="Gestural domain attributes.">att.layer.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.layerDef.ges.html" title="Gestural domain attributes.">att.layerDef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.line.ges.html" title="Attributes for describing the performed components of a line.">att.line.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.liquescent.ges.html" title="Gestural domain attributes.">att.liquescent.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.lyrics.ges.html" title="Gestural domain attributes.">att.lyrics.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.mdiv.ges.html" title="Gestural domain attributes.">att.mdiv.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.metaMark.ges.html" title="Gestural domain attributes.">att.metaMark.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.midi.ges.html" title="Gestural domain attributes.">att.midi.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.nc.ges.html" title="Gestural domain attributes.">att.nc.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.ncGrp.ges.html" title="Gestural domain attributes.">att.ncGrp.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.neume.ges.html" title="Gestural domain attributes.">att.neume.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.note.ges.html" title="Gestural domain attributes.">att.note.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.oriscus.ges.html" title="Gestural domain attributes.">att.oriscus.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.ornam.ges.html" title="Gestural domain attributes.">att.ornam.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.pad.ges.html" title="Gestural domain attributes.">att.pad.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.part.ges.html" title="Gestural domain attributes.">att.part.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.parts.ges.html" title="Gestural domain attributes.">att.parts.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.pb.ges.html" title="Gestural domain attributes.">att.pb.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.phrase.ges.html" title="Gestural domain attributes.">att.phrase.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.pitch.ges.html" title="Gestural attributes about pitch.">att.pitch.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.quilisma.ges.html" title="Gestural domain attributes.">att.quilisma.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.rdg.ges.html" title="Gestural domain attributes.">att.rdg.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.refrain.ges.html" title="Gestural domain attributes.">att.refrain.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.rest.ges.html" title="Gestural domain attributes.">att.rest.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.sb.ges.html" title="Gestural domain attributes.">att.sb.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.score.ges.html" title="Gestural domain attributes.">att.score.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.scoreDef.ges.html" title="Gestural domain attributes for scoreDef. The values set in these attributes act as score-wide defaults for attributes that are not set in descendant elements. For example, the grace attribute value here applies to all the grace attribute values in the score (or, more accurately, until the next scoreDef element) without having to individually set each note’s grace attribute value. The midi.* attributes function as default values when creating sounding output. The tune.* attributes provide the capability of recording a tuning reference pitch.">att.scoreDef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.section.ges.html" title="Gestural domain attributes.">att.section.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.signifLet.ges.html" title="Gestural domain attributes.">att.signifLet.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.soundLocation.html" title="Attributes that locate a sound source within 3-D space.">att.soundLocation</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.sp.ges.html" title="Gestural domain attributes.">att.sp.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.space.ges.html" title="Gestural domain attributes.">att.space.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.staff.ges.html" title="Gestural domain attributes.">att.staff.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.staffDef.ges.html" title="Gestural domain attributes for staffDef in the CMN repertoire.">att.staffDef.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.staffGrp.ges.html" title="Gestural domain attributes.">att.staffGrp.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.stageDir.ges.html" title="Gestural domain attributes.">att.stageDir.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.strophicus.ges.html" title="Gestural domain attributes.">att.strophicus.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.syl.ges.html" title="Gestural domain attributes.">att.syl.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.syllable.ges.html" title="Gestural domain attributes.">att.syllable.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.symbol.ges.html" title="Gestural domain attributes.">att.symbol.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.tempo.ges.html" title="Gestural domain attributes.">att.tempo.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.timestamp.ges.html" title="Attributes that record a performed (as opposed to notated) time stamp.">att.timestamp.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.timestamp2.ges.html" title="Attributes that record a performed (as opposed to notated) time stamp for the end of an event.">att.timestamp2.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.tuning.ges.html" title="Gestural domain attributes.">att.tuning.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.verse.ges.html" title="Gestural domain attributes.">att.verse.ges</a>, <a class="link_odd link_odd_attClass" href="../attribute-classes/att.volta.ges.html" title="Gestural domain attributes.">att.volta.ges</a></div>
                     </div>
                     <div class="contentListBox">
                        <h3>Data Types in MEI.gestural</h3>
                        <div class="contents"><span class="placeholder">– no data types defined in MEI.gestural –&nbsp;</span></div>
                     </div>
                  </div>
               </section>
            </div>
            <div class="column col-4 hide-md">
               <div id="guidelinesVersion"><span class="versionLabel">MEI Version: </span><span id="versionID">6.0-dev+neumes</span><span class="gitLink">(<a href="https://github.com/music-encoding/music-encoding/commit/6bd8bf1bc236fd21a43a996c31994977ff3c4d59" target="_blank" rel="noopener noreferrer">#6bd8bf1</a>)</span></div>
               <form>
                  <div class="search_group"><input name="q" id="search_input" class="search_input" title="At least 3 characters" type="text"><button type="submit" id="submitSearchButtonSide" class="search_button"><span class="search_icon">⚲</span></button></div>
               </form>
               <ul class="nav">
                  <li class="nav-item"><a href="../content/index.html">Guidelines</a></li>
                  <li class="nav-item"><a href="../modules.html">Modules</a></li>
                  <li class="nav-item"><a href="../elements.html">Elements</a></li>
                  <li class="nav-item"><a href="../model-classes.html">Model Classes</a></li>
                  <li class="nav-item"><a href="../macro-groups.html">Macro Groups</a></li>
                  <li class="nav-item"><a href="../attribute-classes.html">Attribute Classes</a></li>
                  <li class="nav-item"><a href="../data-types.html">Data Types</a></li>
               </ul>
               <div class="divider"></div>
            </div>
         </div>
         <div class="modal" id="toc-modal"><a href="#close" id="toc-modal-outer-close" class="modal-overlay" aria-label="Close"></a><div class="modal-container">
               <div class="modal-header"><a href="#close" id="toc-modal-inner-close" class="btn btn-clear float-right" aria-label="Close"></a><div class="modal-title h5">Table of Contents</div>
               </div>
               <div class="modal-body">
                  <div class="content">
                     <ul class="nav">
                        <li class="nav-item"><a href="../content/index.html">Guidelines</a></li>
                        <li class="nav-item"><a href="../modules.html">Modules</a></li>
                        <li class="nav-item"><a href="../elements.html">Elements</a></li>
                        <li class="nav-item"><a href="../model-classes.html">Model Classes</a></li>
                        <li class="nav-item"><a href="../macro-groups.html">Macro Groups</a></li>
                        <li class="nav-item"><a href="../attribute-classes.html">Attribute Classes</a></li>
                        <li class="nav-item"><a href="../data-types.html">Data Types</a></li>
                     </ul>
                     <div class="divider"></div>
                  </div>
               </div>
            </div>
         </div><script>
                                window.addEventListener("load", function(event) {
                                    document.getElementById('topNavigationShow').addEventListener('click',function(e) {
                                        var elem = document.getElementById('toc-modal');
                                        elem.classList.toggle('active');
                                    })
                                    document.getElementById('toc-modal-outer-close').addEventListener('click',function(e) {
                                        var elem = document.getElementById('toc-modal');
                                        elem.classList.toggle('active');
                                    })
                                    document.getElementById('toc-modal-inner-close').addEventListener('click',function(e) {
                                        var elem = document.getElementById('toc-modal');
                                        elem.classList.toggle('active');
                                    })
                                    
                                    function getMenu() {
                                        const fullVersion = '6.0-dev+neumes'
                                        const version = (fullVersion.includes('-dev')) ? 'dev' : 'v' + fullVersion.split('.')[0];
                                        console.log('trying to get menu for version ' + version + ' (' + fullVersion + ')');
                                        
                                        const url = 'https://music-encoding.org/menus/' + version + '/menu.html';
                                        
                                        fetch(url)
                                            .then(function(response) { return response.text()})
                                            .then(function(doc) {
                                                let headerBar = document.querySelector('.headerBar');
                                                const parser = new DOMParser();
                                                const htmlDoc = parser.parseFromString(doc, 'text/html');
                                                const menu = htmlDoc.querySelector('.headerBar');
                                                headerBar.parentNode.replaceChild(menu, headerBar);
                                            });
                                    };
                                    getMenu();
                                        
                                });
                            </script></div>
      <div class="modal" id="searchResultsModal"><a id="searchModalCloseBg" href="#" class="modal-overlay" aria-label="Close"></a><div class="modal-container">
            <div class="modal-header"><button id="searchModalCloseLink" class="btn btn-clear float-right" aria-label="Close"></button><div class="modal-title h5">Search Results for "<span id="searchPattern"></span>"</div>
            </div>
            <div class="modal-body">
               <div class="content" id="searchResultsBox"></div>
            </div>
            <div class="modal-footer"><button class="btn" id="searchModalCloseBtn">Close</button></div>
         </div>
      </div><script>
                            const tabbedFacets = document.querySelectorAll('.facet ul.tab');
                            
                            const tabClick = function(e) {
                                const targetDataDisplay = e.target.getAttribute('data-display');
                                const facetId = e.target.parentNode.parentNode.parentNode.parentNode.id;
                                //console.log('clicked at ' + facetId + ' with data display ' + targetDataDisplay);
                                setTabs(facetId,targetDataDisplay);
                            }
                            
                            console.log('[INFO] Javascript initialized')
                            
                            for(let facetUl of tabbedFacets) {
                                const facetElem = facetUl.parentNode?.parentNode;
                                const facetId = facetElem.id;
                                const storageName = getStorageName(facetId);
                                const defaultDataDisplay = facetUl.children[0]?.children[0]?.getAttribute('data-display');
                                
                                if(localStorage.getItem(storageName) === null) {
                                    setTabs(facetId,defaultDataDisplay?.trim());
                                } else {
                                    setTabs(facetId,`${facetId}_${localStorage.getItem(storageName)?.trim()}`);
                                }
                                
                                const tabs = facetUl.querySelectorAll('.tab-item a');
                                
                                for(let tab of tabs) {
                                    tab.addEventListener('click',tabClick);
                                }
                            }

                            function getDisplayStyle(style) {
                                // split dataDisplay string at underscore, e.g. 'attributes_full' to ['attributes','full'] and return the second part of the array
                                const [_, displayStyle = 'compact'] = style.split('_');
                                return displayStyle;
                            }

                            function getStorageName(facetId) {
                                return 'meiSpecs_' + facetId + '_display';
                            }

                            function setTabs(facetId, style) {
                                const storageName = getStorageName(facetId);
                                const displayStyle = getDisplayStyle(style);
                                localStorage.setItem(storageName,displayStyle);
                                
                                const facetElem = document.getElementById(facetId);
                                
                                const oldTab = facetElem.querySelector('.displayTab.active');
                                if (oldTab) {
                                    oldTab.classList.remove('active');
                                }
                                
                                const newTab = document.getElementById(style + '_tab');
                                if (newTab) {
                                    newTab.classList.add('active');
                                }
                                
                                const oldBox = facetElem.querySelector('.active.facetTabbedContent');
                                if (oldBox) {
                                    oldBox.classList.remove('active');
                                    oldBox.style.display = 'none';
                                }
                                
                                const newBox = document.getElementById(style);
                                if(newBox) {
                                    newBox.classList.add('active');
                                    newBox.style.display = 'block';
                                }
                            }
                            
                            const reducedLevels = false;
                            
            /* SEARCH */
            const searchOptions = {
                // isCaseSensitive: false,
                includeScore: true,
                shouldSort: true,
                includeMatches: true,
                // findAllMatches: false,
                minMatchCharLength: 3,
                // location: 0,
                threshold: 0.1,
                // distance: 100,
                // useExtendedSearch: false,
                ignoreLocation: true,
                ignoreFieldNorm: false,
                keys: [
                    { name:"ident",
                      weight: 10 },
                    { name:"desc",
                      weight: 2 },
                    { name:"remarks",
                      weight: 1 }
                ]
            };
            
            //initialize search
            let fuse = new Fuse(searchIndex, searchOptions);
            let searchReady = true;
            
            const searchButton1 = document.querySelector('#submitSearchButtonSide');
            const searchButton2 = document.querySelector('#submitSearchButtonTop');
            const searchInput1 = document.querySelector('#search_input');
            const searchInput2 = document.querySelector('#search_inputTop');
            const searchModal = document.querySelector('#searchResultsModal');
            const searchModalCloseBtn = document.querySelector('#searchModalCloseBtn');
            const searchModalCloseBg = document.querySelector('#searchModalCloseBg');
            const searchModalCloseLink = document.querySelector('#searchModalCloseLink');
            const searchResultsBox = document.querySelector('#searchResultsBox');
            
            function search(pattern) {
                
                let results = fuse.search(pattern)
                console.log(results)
                
                searchResultsBox.innerHTML = '';
                
                document.querySelector('#searchPattern').innerText = pattern;
                
                const pathAdjust = (reducedLevels) ? './' : '../';
                
                results.forEach(hit => {
                    let div = document.createElement('div')
                    div.classList.add('searchHit')
                    div.setAttribute('data-score', hit.score)
                    let a = document.createElement('a')
                    a.setAttribute('href', pathAdjust + hit.item.url)
                    a.classList.add(hit.item.type)
                    a.innerHTML = hit.item.ident
                    if (hit.item.type === "element") {
                        a.innerHTML = "&lt;" + a.innerHTML + "&gt;"
                    }
                    div.append(a)

                    if(hit.item.type === 'chapter') {
                        
                        let remarksHits = hit.matches.filter(m => m.key === 'remarks')
                        if(remarksHits.length > 0) {
                        
                            let firstI = remarksHits[0].indices[0][0];
                            let dist = remarksHits[0].indices[0][1] - remarksHits[0].indices[0][0] + 1;
                            let startRaw = firstI - 40;
                            
                            let hitLength = 140;
                            
                            let offset = (0 > startRaw)? 40 - firstI : 0;
                            let startCleaned = startRaw + offset;
                            
                            let prefix = (startCleaned > 0) ? '…': '';
                            let postfix = (remarksHits[0].value.length > hitLength + dist) ? '…': '';
                            
                            let snippet = remarksHits[0].value.substr(startCleaned, hitLength + dist);
                            
                            let pre = prefix + snippet.substr(0, 40 - offset);
                            let match = snippet.substr(40 - offset, dist);
                            let post = snippet.substr(40 - offset + dist) + postfix;
                            
                            let preview = document.createElement('div')
                            preview.classList.add('searchPreview')
                            preview.setAttribute('data-snippet', snippet)
                            
                            let preSpan = document.createElement('span')
                            preSpan.innerHTML = pre
                            preview.append(preSpan)
                            let matchSpan = document.createElement('span')
                            matchSpan.classList.add('match')
                            matchSpan.innerHTML = match
                            preview.append(matchSpan)
                            let postSpan = document.createElement('span')
                            postSpan.innerHTML = post
                            preview.append(postSpan)
                            
                            div.append(preview)
                        }
                    }
                    
                    
                    
                    searchResultsBox.append(div)
                })
                
                searchModal.classList.add('active');
            }
            
            function initSideSearch(e) {
                e.preventDefault();
                const val = searchInput1.value;
                if(!val.length > 2) {
                    return false;
                }
                search(val)
            }
            
            function initTopSearch(e) {
                e.preventDefault();
                const val = searchInput2.value;
                if(!val.length > 2) {
                    return false;
                }
                search(val)
            }
            
            function closeSearch(e) {
                e.preventDefault();
                searchModal.classList.remove('active');
            }
            
            searchInput1.addEventListener('keypress', e => {
                if (e.key === 'Enter') {
                  initSideSearch(e)
                }
            });
            
            searchInput2.addEventListener('keypress', e => {
                if (e.key === 'Enter') {
                  initTopSearch(e)
                }
            });
            
            searchButton1.addEventListener('click', initSideSearch)
            searchButton2.addEventListener('click', initTopSearch)
            searchModalCloseBtn.addEventListener('click',closeSearch)
            searchModalCloseBg.addEventListener('click',closeSearch)
            searchModalCloseLink.addEventListener('click',closeSearch)
            
        </script></body>
</html>